<app-navigation [sections]='sections' [slide]='currentSlide' *ngIf='sections && currentSlide'
                [hidden]='currentSlide === slides[0]' [gridImage]='gridImage'
></app-navigation>
<div class='scrolled' #scrolled>
    <!-- <div class='slides'> -->
        <div class='chart-container' [style.background-color]='bgColor' [style.margin-bottom]='-height + "px"'>
            <div class='chart'>
                <app-chart [slide]='currentSlide' *ngIf='currentSlide' 
                           [highlightIndicator]='highlightedIndicator'
                           [highlightIndicators]='highlightedIndicators'
                           [sliderResult]='currentSlide.slider_result ? (sliderResult[currentSlide.slider_result] > -1 ? sliderResult[currentSlide.slider_result] : null ) : null'
                           [gridImage]='gridImage'
                           (hover)='hover = $event'
                           #chart></app-chart>
            </div>
        </div>
        <div class='slide1overlay'>
            <div class='logo'></div>
            <div class='scroll-down' [class.visible]='currentSlide === slides[0]'></div>
        </div>
        <ng-container *ngFor='let slide of slides; let i = index'>
            <div class='slide' *ngIf='slide.section.role !== "footer" && !slide.exploration && !slide.slider'
                [class.darken]='slide.section.role === "intro"'
                [attr.data-slide]='i'
                [attr.data-slug]='slide.id'
                [style.text-shadow]='textShadow'
            >
                <div class='text' [innerHTML]='slideContent(slide, 0)'></div>
                <ul class='dimension_list' *ngIf='slide.dimension_list'>
                    <li *ngFor='let indicator of slide.dimension_list'>
                        <div class='indicator-container' (mouseover)='highlightIndicators([indicator])' (mouseleave)='highlightIndicators([])'
                            (touchstart)='highlightIndicators([indicator])' (touchend)='highlightIndicators([])'>
                            <span class='indicator'>{{indicator}}</span>
                            <span class='indicator-arrow'></span>    
                        </div>
                    </li>
                </ul>
                <div class='text' *ngIf='slide.content.length > 1' [innerHTML]='slideContent(slide, 1)'></div>
            </div>
            <div class='slide exploration' *ngIf='slide.section.role !== "footer" && slide.exploration'
                 [attr.data-slide]='i' [attr.data-slug]='slide.id'
                 [style.text-shadow]='textShadow'
            >
                <div class='text' [innerHTML]='slideContent(slide, 0)'></div>
                <app-weights [slide]='slide'
                             (updated)='updateData(slide, $event)' (highlightIndicator)='highlightIndicators($event)'
                ></app-weights>
            </div>
            <div class='slide slider' *ngIf='slide.section.role !== "footer" && slide.slider'
                 [attr.data-slide]='i' [attr.data-slug]='slide.id'
                 [style.text-shadow]='textShadow'
            >
                <div class='text' [innerHTML]='slideContent(slide, 0)'></div>
                <app-slider [slide]='slide' (updated)='updateSliderResult(slide, $event)'
                ></app-slider>
                </div>
            <app-footer class='slide footer' [slide]='slide' *ngIf='slide.section.role === "footer"'
                        [attr.data-slide]='i' [attr.data-slug]='slide.id'
            ></app-footer>
        </ng-container>
    <!-- </div>     -->
</div>
<div class='tooltip' [style.top.px]='hover.top' [style.left.px]='hover.left'
    [class.dark]='currentSlide.section.role === "intro"'
    *ngIf='hover.country_name'>
    <span>
        <strong>{{hover.country_name}}</strong>
        {{hover.key}}<ng-container *ngIf='hover.value'>: {{hover.value}}</ng-container>
        <ng-container *ngIf='hover.estimated'> (ציון דמה)</ng-container>
    </span>
</div>